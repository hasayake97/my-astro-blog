---
export const prerender = false;

const {idx, ...resetProps} = Astro.props;

const _idx = idx ?? (Math.floor(Math.random() * 100) + 1);

const CoverEndPoint = `https://cn.bing.com/HPImageArchive.aspx?format=js&idx=${_idx}&n=1`;

const CoverUrl = await fetch(CoverEndPoint)
    .then(response => response.json())
    .then(data => `https://cn.bing.com${data.images[0].url}`)
---

<section style={{backgroundImage: `url(${CoverUrl})`}} class={resetProps.class}/>
